let npages = [0, 461, 837, 1025];
let text = ['THREADS', 'A', 'Pthreads', 'API', 'tem', 'cerca', 'de', '60', 'funções', 'que', 'podem', 'ser', 'divididas', 'em', '3', 'grupos:', '❍', 'Gestão', 'de', 'Threads', 'Permitem', 'criar', 'e', 'terminar', 'threads,', 'esperar', 'pela', 'sua', 'terminação,', 'etc.', 'Incluem', 'funções', 'para', 'ler/alterar', 'os', 'atributos', 'dos', 'threads', '(de', 'escalonamento', 'e', 'outros,', 'ex:', 'se', 'é', 'possível', 'esperar', 'que', 'um', 'thread', 'termine).', '❍', 'Mutexes', 'Permitem', 'proteger', 'uma', 'secção', 'crítica.', 'Incluem', 'funções', 'para', 'criar,', 'destruir,', 'trancar', '(lock)', 'e', 'destrancar', '(unlock)', 'mutexes', 'e', 'alterar', 'os', 'seus', 'atributos.', '❍', 'Condition', 'Variables', '(Variáveis', 'de', 'Condição)', 'Permitem', 'bloquear', 'um', 'thread', 'até', 'que', 'se', 'verifique', 'uma', 'certa', 'condição', 'e', 'entrar', 'protegido', 'numa', 'secção', 'crítica.', 'São', 'usadas', 'em', 'conjunto', 'com', 'um', 'mutex', 'associado.', '◬', 'Nota:', 'Chamadas', 'POSIX:', 'include', '<pthread.h>', 'gcc', 'prog1.c', '-o', 'prog1', '-D_REENTRANT', '-lpthread', '-Wall', '#', 'Criação', 'de', 'Threads:', 'int', 'pthread_create', '(', 'pthread_t', '*tid,', 'const', 'pthread_attr_t', '*attr,', 'void', '*', '(*func)', '(void', '*),', 'void', '*arg', ');', '...', 'void', '*func', '(void', '*arg', ')', '{', '/*', 'CÓDIGO', 'DO', 'THREAD', '*/', '...', '}', 'tid', 'apontador', 'para', 'a', 'identificação', 'do', 'thread,', 'retornada', 'pela', 'chamada', '-', 'é', 'usada', 'noutras', 'chamadas', 'da', 'API', 'de', 'threads.', 'usado', 'para', 'especificar', 'os', 'atributos', 'do', 'thread', 'a', 'criar,', 'ex:', 'política', 'de', 'escalonamento,', 'tamanho', 'da', 'stack,', '...;', 'ver', 'chamadas', 'pthread_attr_xxx', '-', 'NULL', '=', 'attr', 'usar', 'atributos', 'por', 'defeito;', 'é', 'a', 'situação', 'mais', 'frequente', 'func', 'função', 'que', 'o', 'thread', 'executará', 'quando', 'for', 'criado', '-', 'esta', 'função', 'só', 'admite', '1', 'argumento,', 'que', 'lhe', 'é', 'passado', 'através', 'do', 'parâmetro', 'arg', 'apontador', 'para', 'o(s)', 'argumento(s)', 'do', 'thread;', 'pode', 'ser', 'NULL', '-', 'NOTA:', 'para', 'passar', 'vários', 'argumentos', 'é', 'necessário', 'compactá-los', 'numa', 'estrutura', 'de', 'arg', 'dados', '#', 'Terminação', 'de', 'Threads:', 'O', 'thread', 'retorna', 'normalmente', '(na', 'função', 'inicial', 'é', 'executada', 'a', 'instrução', 'return', 'ou', 'atinge-se', 'a', '"}"', 'final', ')', 'O', 'thread', 'invoca', 'pthread_exit()', 'O', 'thread', 'é', 'cancelado', 'por', 'outro', 'thread,', 'através', 'de', 'pthread_cancel()', 'O', 'processo', 'a', 'que', 'o', 'thread', 'pertence', 'termina', 'O', 'processo', 'a', 'que', 'o', 'thread', 'pertence', 'substitui', 'o', 'seu', 'código', 'devido', 'a', 'uma', 'chamada', 'execxx()', '◬', 'Nota:', 'Se', 'main()', 'terminar', 'porque', 'executou', 'exit(),', '_exit(),', 'return', 'ou', 'atingiu', 'a', 'última', 'instrução', 'os', 'threads', 'por', 'si', 'criados', 'também', 'terminarão', 'automaticamente.', 'No', 'entanto,', 'se', 'main()', 'terminar', 'com', 'a', 'chamada', 'pthread_exit()', 'os', 'outros', 'threads', 'continuarão', 'em', 'execução;', 'as', 'variáveis', 'globais', 'não', 'serão', 'destruídas', 'e', 'os', 'ficheiros', 'abertos', 'não', 'serão', 'fechados.', 'Um', 'thread', 'pode', 'esperar', 'que', 'outros', 'threads', 'terminem', 'usando', 'a', 'chamada', 'pthread_join()', '.', 'void', 'pthread_exit', '(void', '*status);', '//', 'ATENÇÃO:', 'Não', 'retorna', 'a', 'quem', 'fez', 'a', 'chamada.', 'status', 'valor', 'de', 'retorno,', 'especificando', 'o', 'estado', 'de', 'terminação', 'do', 'thread', '-', 'NULL,', 'quando', 'não', 'se', 'pretende', 'retornar', 'nada', '◬', 'Nota:', 'Se', 'a', 'função', 'inicial', 'do', 'thread', 'terminar', 'com', 'return', 'ptr', ',', 'o', 'valor', 'de', 'status', 'será', 'o', 'apontado', 'por', 'ptr', 'o', 'apontador', 'status', 'não', 'deve', 'apontar', 'para', 'um', 'objeto', 'que', 'seja', 'local', 'ao', 'thread', 'pois', 'esse', 'objeto', 'deixará', 'de', 'existir', 'quando', 'o', 'thread', 'terminar', 'pthread_exit()', 'não', 'fecha', 'os', 'ficheiros', 'que', 'estiverem', 'abertos', '\x0c', '#', 'Esperar', 'que', 'uma', 'Thread', 'termine:', 'int', 'pthread_join', '(pthread_t', 'tid,', 'void', '**status);', 'O', 'thread', 'que', 'invocar', 'esta', 'função', 'bloqueia', 'até', 'que', 'o', 'thread', 'especificado', 'por', 'tid', 'termine', 'tid', 'thread', 'pelo', 'qual', 'se', 'quer', 'esperar', '(=', 'valor', 'obtido', 'ao', 'invocar', 'pthread_create()', ')', 'status', 'apontador', 'para', 'apontador', 'para', 'o', 'valor', 'de', 'retorno', 'do', 'thread', '◬', 'Nota:', 'Os', 'threads', 'podem', 'ser', 'joinable', '(por', 'defeito)', 'ou', 'detached.', 'É', 'impossível', 'esperar', 'por', 'um', 'detached', 'thread.', '(Ver', 'adiante)', 'Quando', 'um', 'joinable', 'thread', 'termina', 'a', 'sua', 'ID', 'e', 'status', 'são', 'mantidos', 'pelo', 'S.O.', 'até', 'que', 'outro', 'thread', 'invoque', 'pthread_join()', '.', 'Não', 'há', 'forma', 'de', 'esperar', 'por', 'qualquer', 'um', 'dos', 'threads', 'como', 'com', 'os', 'processos', 'através', 'de', 'wait()', 'e', 'waitpid(-1,...)', '#', 'Detached', 'Threads:', 'Usando', 'pthread_detach()', 'é', 'possível', 'transformar', 'um', 'joinable', 'thread', 'em', 'detached.', 'int', 'pthread_detach', '(pthread_t', 'tid);', 'Quando', 'termina,', 'todos', 'os', 'recursos', 'que', 'lhe', 'estão', 'associados', 'são', 'libertados.', '◬', 'Nota:', 'Esta', 'função', 'é', 'frequentemente', 'invocada', 'pelo', 'thread', 'que', 'quer', 'passar', 'de', 'joinable', 'a', 'detached,', 'o', 'que', 'pode', 'ser', 'conseguido', 'executando', 'pthread_detach(pthread_self())', 'pthread_t', 'pthread_self', '(void);', '//', 'Retorna:', 'thread', 'ID', 'do', 'thread', 'que', 'fez', 'a', 'chamada', 'Para', 'criar', 'um', 'thread', 'no', 'estado', 'detached', 'ao', 'invocar', 'pthread_create()', 'é', 'necessário', 'preencher', 'devidamente', 'o', 'atributo', 'attr', 'desta', 'chamada.', '❍', 'Exemplos', '#include', '<stdio.h>', '#include', '<stdlib.h>', '#include', '<pthread.h>', '...', 'struct', 'thread_data', '{', 'void', '*thr_func(void', '*arg);', 'int', 'thread_num;', '#include', '<stdio.h>', 'int', 'value;', '#include', '<pthread.h>', 'int', 'main(void)', '{', 'char', '*message;', '#include', '<unistd.h>', 'pthread_t', 'tid;', '};', 'int', 'k', '=', '10;', 'int', 'global;', 'void', '*r;', 'struct', 'thread_data', 'thr_data_array[NUM_THREADS];', 'void', '*thr_func(void', '*arg);', 'pthread_create(&tid,', 'NULL,', 'thr_func,', '&k);', 'void', '*PrintHello(void', '*thread_arg)', '{', 'int', 'main(void)', '{', 'pthread_join(tid,', '&r);', 'struct', 'thread_data', '*my_data;', 'pthread_t', 'tid;', '...', 'printf("Hello', 'from', 'main', 'thread\\n");', 'printf("Main', 'thread:', '%d\\n",', '*(int', '*)r);', 'my_data', '=', '(struct', 'thread_data', '*)', 'thread_arg;', 'pthread_create(&tid,', 'NULL,', 'thr_func,', 'NULL);', 'free(r);', 'tasknum', '=', 'my_data->thread_num;', 'pthread_exit(NULL);', 'value', '=', 'my_data->value;', 'return', '0;', 'hello_msg', '=', 'my_data->message;', '//', 'desta', 'forma,', 'o', 'thread', 'auxiliar', '}', '...', '//', 'pode', 'continuar', 'a', 'executar', '}', '//', 'mesmo', 'depois', 'de', 'main()', 'terminar', 'void', '*thr_func(void', '*arg)', '{', '}', 'void', '*ret;', 'int', 'main()', '{', 'int', 'value;', '...', 'void', '*thr_func(void', '*arg)', '{', 'thread_data_array[t].thread_num', '=', 't;', 'sleep(3);', 'value', '=', '*(int', '*)', 'arg;', 'thread_data_array[t].value', '=', 'x;', 'printf("Hello', 'from', 'auxiliar', 'thread\\n");', 'printf("Aux', 'thread:', '%d\\n",value);', 'thread_data_array[t].message', '=', 'messages[t];', 'return', 'NULL;', 'value++;', 'pthread_create(&threads[t],', 'NULL,', 'PrintHello,', '(void', '*)', '&thr_data_array[t]);', '}', '...', 'ret', '=', 'malloc(sizeof(int));', '}', '*(int', '*)', 'ret', '=', 'value;', 'return', 'ret;', '}', '\x0c', '❍', 'Extras:', 'As', 'funções', 'invocadas', 'num', 'thread', 'têm', 'de', 'ser', 'thread-safe.', 'As', 'funções', 'thread-unsafe', 'podem', 'ser', 'classificadas', 'em', '4', 'classes:', 'Classe', '1', '-', 'não', 'protegem', 'variáveis', 'partilhadas', 'Classe', '2', '-', 'baseiam-se', 'na', 'persistência', 'de', 'estado', 'entre', 'invocações', 'Classe', '3', '-', 'retornam', 'um', 'apontador', 'para', 'uma', 'variável', 'estática', 'Classe', '4', '-', 'invocam', 'funções', 'thread-unsafe', 'Uma', 'função', 'diz-se', 'reentrante', 'se', 'puder', 'ser', 'parcialmente', 'executada', 'por', 'uma', 'tarefa,', '“reentrada”', 'por', 'outra', 'tarefa', 'e', 'depois', 'continuada', 'pela', 'tarefa', 'original.', 'Isto', 'requer', 'que', 'a', 'informação', 'de', 'estado', 'seja', 'guardada', 'na', 'stack,', 'não', 'em', 'variáveis', 'globais', 'ou', 'static.', 'As', 'funções', 'reentrantes', 'são', 'um', 'sub-conjunto', 'das', 'funções', 'thread-safe.', 'Cada', 'thread', 'tem', 'a', 'sua', 'máscara', 'de', 'sinais', '(ver', 'pthread_sigmask()', '),', 'mas', 'a', 'disposição', 'dos', 'sinais', 'é', 'partilhada', 'todos', 'os', 'threads', 'do', 'processo.', 'Isto', 'significa', 'que', 'threads', 'individuais', 'podem', 'bloquear', 'sinais,', 'mas', 'todas', 'os', 'threads', 'partilham', 'a', 'mesma', 'ação', 'associada', 'a', 'cada', 'sinal.', 'Os', 'sinais', 'são', 'enviados', 'individualmente', 'aos', 'threads', '-', 'sinais', 'causados', 'por', 'falhas', 'de', 'hardware,', 'alarmes,', 'etc,', 'o', 'sinal', 'é', 'enviado', 'à', 'thread', 'que', 'causou', 'o', 'evento.', 'Outros', 'sinais', 'são', 'enviados', 'a', 'um', 'thread', 'aleatório.', 'Para', 'enviar', 'um', 'sinal,', 'chama-se', 'a', 'função', 'pthread_kill(tid,', 'signo)', '\x0c'];
module.exports = {npages, text};